<!DOCTYPE html>
<html lang="es">
<head>
  <style>
    #google-maps-puntos { width: 100%; height: 400px; border-radius: 1rem; margin: 0 auto; min-height: 300px; border: none; }
    
    /* Font-display optimizado para evitar layout shifts */
    @font-face {
      font-family: 'Roboto';
      font-style: normal;
      font-weight: 400;
      font-display: swap;
      src: local('Roboto'), local('Roboto-Regular'), url(https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Mu4mxK.woff2) format('woff2');
    }
    
    @font-face {
      font-family: 'Merriweather';
      font-style: normal;
      font-weight: 400;
      font-display: swap;
      src: local('Merriweather'), url(https://fonts.gstatic.com/s/merriweather/v30/u-440qyriQwlOrhSvowK_l5-fCZM.woff2) format('woff2');
    }
    
    /* CSS Crítico para carga rápida */
    :root {
      --amarillo-pastel: #dfbf85;
      --amarillo-suave: #f2ce85;
      --naranja-mostaza: #d79f49;
      --verde-oliva: #aca060;
      --texto-principal: #333333;
      --fondo-claro: #ffffff;
    }
    
    * { 
      box-sizing: border-box; 
      margin: 0; 
      padding: 0; 
    }
    
    body {
      font-family: 'Roboto', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      color: var(--texto-principal);
      background-color: var(--fondo-claro);
      line-height: 1.6;
      font-display: swap;
      /* Optimizaciones para evitar redistribución forzada */
      contain: layout style;
      will-change: auto;
    }
    
    header {
      background-color: var(--amarillo-pastel);
      padding: 1rem 2rem;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      /* Contención para evitar redistribuciones */
      contain: layout style;
    }
    
    nav {
      display: flex;
      align-items: center;
      justify-content: space-between;
      max-width: 1200px;
      margin: 0 auto;
      min-height: 60px;
    }
    
    .menu {
      display: flex;
      list-style: none;
      gap: 2rem;
      margin: 0;
      padding: 0;
      align-items: center;
      min-height: 40px;
    }
    
    .logo {
      display: flex;
      align-items: center;
      min-height: 40px;
      min-width: 200px;
    }
    
    /* Prevenir layout shifts en imágenes */
    img {
      max-width: 100%;
      height: auto;
      display: block;
      /* Optimización para evitar redistribución en imágenes */
      contain: layout;
      will-change: auto;
    }
    
    /* Optimizaciones específicas para elementos dinámicos */
    .product-card {
      min-height: 400px;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      contain: layout style;
    }
    
    .product-card img {
      width: 100%;
      height: 200px;
      object-fit: cover;
      /* Prevenir redistribución en imágenes de productos */
      contain: size layout;
    }
    
    /* Hero section optimizada */
    .hero {
      contain: layout style;
      will-change: auto;
      background: linear-gradient(135deg, var(--amarillo-suave), var(--naranja-mostaza));
      padding: 4rem 2rem;
      text-align: center;
      color: white;
      min-height: 500px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      position: relative;
    }
    
    /* Grid optimizado para productos */
    .productos-grid {
      contain: layout;
    }
    
    /* Skeleton loading para prevenir CLS */
    .image-placeholder {
      background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
      background-size: 200% 100%;
      animation: loading 1.5s infinite;
    }
    
    @keyframes loading {
      0% { background-position: 200% 0; }
      100% { background-position: -200% 0; }
    }
    
    /* Evitar layout shifts en botones */
    .btn-primary, .btn-secondary {
      min-height: 44px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      white-space: nowrap;
    }
    
    .hero h1 {
      font-family: 'Merriweather', serif;
      font-size: 3.5rem;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
      margin-bottom: 1rem;
      font-display: swap;
      line-height: 1.2;
      max-width: 800px;
      width: 100%;
    }
    
    .hero p {
      font-size: 1.2rem;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
      max-width: 600px;
      margin: 0 auto 2rem auto;
      line-height: 1.6;
      width: 100%;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 2rem;
    }
  </style>
  
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="BoccoCitos - Sabor auténtico que te abraza. Descubre nuestros deliciosos panes de yuca, bolones, muchines y más productos tradicionales ecuatorianos.">
  <meta name="keywords" content="pan de yuca, bolones, muchines, comida ecuatoriana, BoccoCitos">
  <meta name="author" content="BoccoCitos">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>BoccoCitos | Sabor que te abraza</title>
  
  <!-- Preconnect para mejorar rendimiento -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preconnect" href="https://cdnjs.cloudflare.com">
  <link rel="preconnect" href="https://www.google.com">
  <link rel="preconnect" href="https://www.googletagmanager.com">
  <link rel="preconnect" href="https://tracker.metricool.com">
  
  <!-- Preload de recursos críticos -->
  <link rel="preload" href="https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Mu4mxK.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="https://fonts.gstatic.com/s/merriweather/v30/u-440qyriQwlOrhSvowK_l5-fCZM.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="img/logotrazo.png" as="image">
  <!-- Imagen LCP con alta prioridad -->
  <link rel="preload" href="img/pan de yuca.png" as="image" fetchpriority="high">
  <link rel="preload" href="img/maria pipona de maduro.jpg" as="image">
  <link rel="preload" href="img/mini bolon de maduro.png" as="image">
  
  <!-- Favicon -->
  <link rel="icon" type="image/png" href="img/logotrazo.png">
  <link rel="shortcut icon" type="image/png" href="img/logotrazo.png">
  
  <!-- CSS Crítico se carga de forma asíncrona después del crítico inline -->
  <link rel="preload" href="style.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <noscript><link rel="stylesheet" href="style.css"></noscript>
  
  <!-- Fuentes ya están incluidas en CSS crítico con font-display: swap -->
</head>
<body>

  <!-- Header y Navegación -->
  <header>
    <nav>
      <div class="logo">
        <img src="img/logotrazo.png" alt="BoccoCitos Logo" width="40" height="40" style="height: 40px; width: auto; margin-right: 10px; border-radius: 4px;">
      </div>
      <ul class="menu">
        <li><a href="#inicio">Inicio</a></li>
        <li><a href="productos.html">Productos</a></li>
        <li><a href="nuestra-historia.html">Nuestra Historia</a></li>
        <li><a href="#puntos-venta">Puntos de Venta</a></li>
        <li><a href="formulario-distribuidores.html">Distribuidores</a></li>
      </ul>
    </nav>
  </header>

  <!-- Sección Hero -->
  <section id="inicio" class="hero">
    <div class="container">
      <h1>Sabor que te abraza</h1>
      <p>Descubre el sabor auténtico y la tradición campesina en cada bocadito de BoccoCitos. Productos sin gluten, listos en minutos.</p>
      <div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 1rem; margin-top: 2rem; min-height: 60px;">
        <a href="productos.html" class="btn-primary" style="display: inline-block; text-decoration: none; min-width: 200px; text-align: center;">Conoce nuestros productos</a>
        <a href="formulario-distribuidores.html" style="display: inline-block; text-decoration: none; background-color: var(--verde-oliva); color: white; padding: 0.75rem 1.5rem; border-radius: 0.5rem; font-weight: 500; transition: all 0.3s ease; min-width: 150px; text-align: center;">Ser Distribuidor</a>
      </div>
    </div>
  </section>

  <!-- Sección Productos -->
  <section id="productos">
    <h2 style="text-align: center; margin-bottom: 2rem;">Nuestros Productos Más Vendidos</h2>
    <div class="productos-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 2rem; max-width: 1000px; margin: 0 auto;">
      <!-- Pan de Yuca -->
      <div class="producto-card" style="min-height: 400px; background: white; border-radius: 1rem; box-shadow: 0 4px 15px rgba(0,0,0,0.1); overflow: hidden; display: flex; flex-direction: column;">
        <div style="height: 200px; overflow: hidden; background-color: #f5f5f5;">
          <img src="img/pan de yuca.png" alt="Pan de Yuca" loading="eager" fetchpriority="high" width="300" height="200" style="width: 100%; height: 200px; object-fit: cover;">
        </div>
        <div class="card-body" style="padding: 1.5rem; flex-grow: 1; display: flex; flex-direction: column; justify-content: space-between;">
          <h3 style="margin: 0 0 1rem 0; font-size: 1.1rem;">Pan de Yuca</h3>
          <div style="display: flex; justify-content: space-between; align-items: center; margin-top: auto;">
            <span style="font-size: 1.2rem; font-weight: bold; color: var(--verde-oliva);">$3.50</span>
            <a href="pan-de-yuca.html" class="btn-secondary" style="text-decoration: none; display: inline-block; min-width: 80px; text-align: center;">Ver más</a>
          </div>
        </div>
      </div>
      <!-- María Pipona de Maduro -->
      <div class="producto-card" style="min-height: 400px; background: white; border-radius: 1rem; box-shadow: 0 4px 15px rgba(0,0,0,0.1); overflow: hidden; display: flex; flex-direction: column;">
        <div style="height: 200px; overflow: hidden; background-color: #f5f5f5;">
          <img src="img/maria pipona de maduro.jpg" alt="María Pipona de Maduro" loading="lazy" width="300" height="200" style="width: 100%; height: 200px; object-fit: cover;">
        </div>
        <div class="card-body" style="padding: 1.5rem; flex-grow: 1; display: flex; flex-direction: column; justify-content: space-between;">
          <h3 style="margin: 0 0 1rem 0; font-size: 1.1rem;">María Pipona de Maduro</h3>
          <div style="display: flex; justify-content: space-between; align-items: center; margin-top: auto;">
            <span style="font-size: 1.2rem; font-weight: bold; color: var(--verde-oliva);">$3.00</span>
            <a href="maria-pipona-maduro.html" class="btn-secondary" style="text-decoration: none; display: inline-block; min-width: 80px; text-align: center;">Ver más</a>
          </div>
        </div>
      </div>
      <!-- Mini Bolones de Maduro -->
      <div class="producto-card" style="min-height: 400px; background: white; border-radius: 1rem; box-shadow: 0 4px 15px rgba(0,0,0,0.1); overflow: hidden; display: flex; flex-direction: column;">
        <div style="height: 200px; overflow: hidden; background-color: #f5f5f5;">
          <img src="img/mini bolon de maduro.png" alt="Mini Bolones de Maduro" loading="lazy" width="300" height="200" style="width: 100%; height: 200px; object-fit: cover;">
        </div>
        <div class="card-body" style="padding: 1.5rem; flex-grow: 1; display: flex; flex-direction: column; justify-content: space-between;">
          <h3 style="margin: 0 0 1rem 0; font-size: 1.1rem;">Mini Bolones de Maduro</h3>
          <p style="margin: 0 0 1rem 0; color: #666; font-size: 0.9rem;">Crocantes por fuera y suaves por dentro, un bocado tradicional con sabor único.</p>
          <div style="display: flex; justify-content: space-between; align-items: center; margin-top: auto;">
            <span style="font-size: 1.2rem; font-weight: bold; color: var(--verde-oliva);">$3.50</span>
            <a href="mini-bolones-maduro.html" class="btn-secondary" style="text-decoration: none; display: inline-block; min-width: 80px; text-align: center;">Ver más</a>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Botón para ver todos los productos -->
    <div style="text-align: center; margin-top: 3rem;">
      <a href="productos.html" 
         style="background-color: var(--naranja-mostaza); color: white; font-weight: 700; padding: 1rem 2rem; border-radius: 0.5rem; text-decoration: none; display: inline-block; transition: all 0.3s ease; box-shadow: 0 4px 12px rgba(0,0,0,0.15); font-size: 1.1rem;">
        Ver Todos Nuestros Productos
      </a>
    </div>
  </section>

  <!-- Sección Nuestra Historia -->
  <section style="padding: 4rem 2rem; background-color: #f8f9fa;">
    <h2 style="text-align: center; margin-bottom: 2rem;">Nuestra Historia</h2>
    <div style="display: flex; align-items: center; gap: 3rem; max-width: 1000px; margin: 0 auto; flex-wrap: wrap; min-height: 400px;">
      <div style="flex: 1; min-width: 300px; min-height: 200px;">
        <p style="text-align: justify; line-height: 1.7; font-size: 1.1rem;">
          Somos una familia que decidió volver a sus raíces en el campo, trabajando con amor y respeto por la tierra para ofrecerte bocaditos tradicionales, naturales y llenos de cariño.
        </p>
      </div>
      <div style="flex: 1; min-width: 300px; text-align: center; min-height: 300px; display: flex; align-items: center; justify-content: center;">
        <div style="width: 100%; max-width: 400px; height: 300px; background-color: #f5f5f5; border-radius: 1rem; overflow: hidden;">
          <img src="img/familia.png" alt="Nuestra Familia" loading="lazy" width="400" height="300" style="width: 100%; height: 300px; object-fit: cover; border-radius: 1rem; box-shadow: 0 8px 25px rgba(0,0,0,0.15);">
        </div>
      </div>
    </div>
  </section>

  <!-- Sección Puntos de Venta -->
  <section id="puntos-venta" style="background-color: var(--fondo-claro); padding: 4rem 2rem;">
    <div style="max-width: 1200px; margin: 0 auto;">
      <div style="text-align: center; margin-bottom: 3rem;">
        <h2 style="margin-bottom: 1rem; color: var(--naranja-mostaza); font-size: 2.5rem;">Encuentra Nuestros Productos</h2>
        <p style="color: #666; margin-bottom: 2rem; font-size: 1.1rem;">
          Descubre dónde puedes encontrar los auténticos bocaditos de BoccoCitos. 
          Nuestros productos están disponibles en puntos de venta y supermercados seleccionados para garantizar 
          la mejor calidad y frescura.
        </p>
      </div>

      <!-- Controles del mapa -->
      <div style="margin-bottom: 2rem;">
        <div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 1rem;">
          <button id="show-all-stores" 
                  style="background-color: var(--naranja-mostaza); color: white; padding: 0.75rem 1.5rem; border: none; border-radius: 0.5rem; cursor: pointer; display: flex; align-items: center; gap: 0.5rem; transition: all 0.3s ease;">
            <span>🏪</span> Puntos de Venta y Supermercados
          </button>
        </div>
      </div>

      <!-- Mapa -->
      <div style="background: white; border-radius: 1rem; box-shadow: 0 4px 15px rgba(0,0,0,0.1); overflow: hidden; max-width: 800px; margin: 0 auto 3rem;">
        <div id="stores-map" style="width: 100%; height: 400px; background: linear-gradient(135deg, #e3f2fd, #f0f8ff); display: flex; align-items: center; justify-content: center; flex-direction: column;">
          <iframe id="google-maps-puntos" 
                  src="https://www.google.com/maps/d/u/0/embed?mid=1AgiK4EHdw7HSgRgO3pHlc9OKWZ_30Bc&ehbc=2E312F" 
                  width="100%" 
                  height="400" 
                  loading="lazy"
                  style="border-radius: 1rem; border: none;">
          </iframe>
        </div>
      </div>

      <!-- Información adicional -->
      <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem; max-width: 800px; margin: 0 auto 3rem;">
        <div style="text-align: center; padding: 2rem; background: #e3f2fd; border-radius: 1rem;">
          <span style="font-size: 3rem; color: #1976d2; margin-bottom: 1rem; display: block;">🏪</span>
          <h3 style="font-weight: 700; font-size: 1.2rem; margin-bottom: 0.5rem;">Puntos de Venta y Supermercados</h3>
          <p style="font-size: 0.9rem; color: #666;">Encuentra nuestros productos en tiendas locales, supermercados y distribuidores cercanos</p>
        </div>
      </div>

      <!-- Call to action -->
      <div style="text-align: center;">
        <h3 style="font-size: 1.8rem; font-weight: 700; color: var(--naranja-mostaza); margin-bottom: 1rem;">¿Quieres ser punto de venta?</h3>
        <p style="color: #666; margin-bottom: 2rem; font-size: 1.1rem;">Únete a nuestra red de distribuidores y lleva el sabor tradicional a tu comunidad</p>
        <a href="formulario-distribuidores.html" 
           style="background-color: var(--naranja-mostaza); color: white; font-weight: 700; padding: 1rem 2rem; border-radius: 0.5rem; text-decoration: none; display: inline-block; transition: all 0.3s ease; box-shadow: 0 4px 12px rgba(0,0,0,0.15);">
          Ser Distribuidor
        </a>
      </div>
    </div>
  </section>

  <!-- Botón flotante de WhatsApp -->
  <a href="https://wa.me/593987843771" target="_blank" class="whatsapp-float" title="Contáctanos por WhatsApp"></a>

  <!-- Footer -->
  <footer style="background-color: #2d3748; color: white;">
    <div style="max-width: 1200px; margin: 0 auto; padding: 3rem 2rem;">
      <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 3rem; text-align: left;">
        <div>
          <h3 style="font-size: 1.5rem; font-weight: 700; margin-bottom: 1rem; color: #f6d55c;">BoccoCitos</h3>
          <p style="font-size: 1rem; color: #e2e8f0; line-height: 1.6; margin-bottom: 1rem;">
            Sabores auténticos, tradición familiar y calidad natural en cada bocado.
          </p>
          <p style="font-size: 1rem; color: #e2e8f0; line-height: 1.6;">
            Descubre el verdadero gusto del campo ecuatoriano con nuestros bocaditos artesanales, 
            hechos con amor y dedicación para compartir en cada ocasión especial.
          </p>
        </div>
        <div>
          <h3 style="font-size: 1.5rem; font-weight: 700; margin-bottom: 1rem; color: #f6d55c;">Enlaces</h3>
          <ul style="list-style: none; padding: 0; margin: 0;">
            <li style="margin-bottom: 0.75rem;"><a href="#inicio" style="color: #e2e8f0; text-decoration: none; font-size: 1rem; transition: color 0.3s ease;" onmouseover="this.style.color='#f6d55c'" onmouseout="this.style.color='#e2e8f0'">Inicio</a></li>
            <li style="margin-bottom: 0.75rem;"><a href="productos.html" style="color: #e2e8f0; text-decoration: none; font-size: 1rem; transition: color 0.3s ease;" onmouseover="this.style.color='#f6d55c'" onmouseout="this.style.color='#e2e8f0'">Productos</a></li>
            <li style="margin-bottom: 0.75rem;"><a href="nuestra-historia.html" style="color: #e2e8f0; text-decoration: none; font-size: 1rem; transition: color 0.3s ease;" onmouseover="this.style.color='#f6d55c'" onmouseout="this.style.color='#e2e8f0'">Nosotros</a></li>
            <li style="margin-bottom: 0.75rem;"><a href="#puntos-venta" style="color: #e2e8f0; text-decoration: none; font-size: 1rem; transition: color 0.3s ease;" onmouseover="this.style.color='#f6d55c'" onmouseout="this.style.color='#e2e8f0'">Puntos de Venta</a></li>
            <li style="margin-bottom: 0.75rem;"><a href="formulario-distribuidores.html" style="color: #e2e8f0; text-decoration: none; font-size: 1rem; transition: color 0.3s ease;" onmouseover="this.style.color='#f6d55c'" onmouseout="this.style.color='#e2e8f0'">Distribuidores</a></li>
          </ul>
        </div>
        <div>
          <h3 style="font-size: 1.5rem; font-weight: 700; margin-bottom: 1rem; color: #f6d55c;">Síguenos</h3>
          <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
            <!-- Facebook -->
            <a href="https://www.facebook.com/boccocitos" target="_blank" rel="noopener" title="Facebook" 
               style="color: #e2e8f0; font-size: 1.8rem; transition: color 0.3s ease; display: inline-block;" 
               onmouseover="this.style.color='#f6d55c'" onmouseout="this.style.color='#e2e8f0'">
               <i class="fab fa-facebook-f"></i>
            </a>
            <!-- Instagram -->
            <a href="https://www.instagram.com/boccocitos/" target="_blank" rel="noopener" title="Instagram" 
               style="color: #e2e8f0; font-size: 1.8rem; transition: color 0.3s ease; display: inline-block;" 
               onmouseover="this.style.color='#f6d55c'" onmouseout="this.style.color='#e2e8f0'">
               <i class="fab fa-instagram"></i>
            </a>
            <!-- WhatsApp -->
            <a href="https://wa.me/593987843771" target="_blank" rel="noopener" title="WhatsApp" 
               style="color: #e2e8f0; font-size: 1.8rem; transition: color 0.3s ease; display: inline-block;" 
               onmouseover="this.style.color='#f6d55c'" onmouseout="this.style.color='#e2e8f0'">
               <i class="fab fa-whatsapp"></i>
            </a>
            <!-- LinkedIn -->
            <a href="https://www.linkedin.com/company/boccocitos/?viewAsMember=true" target="_blank" rel="noopener" title="LinkedIn" 
               style="color: #e2e8f0; font-size: 1.8rem; transition: color 0.3s ease; display: inline-block;" 
               onmouseover="this.style.color='#f6d55c'" onmouseout="this.style.color='#e2e8f0'">
               <i class="fab fa-linkedin-in"></i>
            </a>
            <!-- X (Twitter) -->
            <a href="https://x.com/boccocitos" target="_blank" rel="noopener" title="X" 
               style="color: #e2e8f0; font-size: 1.8rem; transition: color 0.3s ease; display: inline-block;" 
               onmouseover="this.style.color='#f6d55c'" onmouseout="this.style.color='#e2e8f0'">
               <i class="fab fa-x-twitter"></i>
            </a>
            <!-- TikTok -->
            <a href="https://www.tiktok.com/@boccocitos" target="_blank" rel="noopener" title="TikTok" 
               style="color: #e2e8f0; font-size: 1.8rem; transition: color 0.3s ease; display: inline-block;" 
               onmouseover="this.style.color='#f6d55c'" onmouseout="this.style.color='#e2e8f0'">
               <i class="fab fa-tiktok"></i>
            </a>
            <!-- YouTube -->
            <a href="https://www.youtube.com/@boccocitos" target="_blank" rel="noopener" title="YouTube" 
               style="color: #e2e8f0; font-size: 1.8rem; transition: color 0.3s ease; display: inline-block;" 
               onmouseover="this.style.color='#f6d55c'" onmouseout="this.style.color='#e2e8f0'">
               <i class="fab fa-youtube"></i>
            </a>
          </div>
        </div>
      </div>
      <div style="border-top: 1px solid #4a5568; margin-top: 2rem; padding-top: 1.5rem; text-align: center; font-size: 0.9rem;">
        <p>&copy; 2025 BoccoCitos. Todos los derechos reservados.</p>
      </div>
    </div>
  </footer>
  
  <!-- Scripts no críticos al final para mejor rendimiento -->
  
  <!-- Google Analytics optimizado -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-RPVLT6BMEB"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-RPVLT6BMEB');
  </script>
  
  <!-- Metricool Analytics optimizado -->
  <script>
    function loadScript(a){var b=document.getElementsByTagName("head")[0],c=document.createElement("script");c.type="text/javascript",c.src="https://tracker.metricool.com/resources/be.js",c.onreadystatechange=a,c.onload=a,b.appendChild(c)}loadScript(function(){beTracker.t({hash:"c50c70cd70f64617f45370cd0bf6868d"})});
  </script>
  
  <!-- Font Awesome carga asíncrona -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" media="print" onload="this.media='all'">
  <noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"></noscript>
  
  <!-- Google My Maps integrado - sin necesidad de JavaScript adicional -->
  <script>
    // Prevenir Cumulative Layout Shift (CLS) - Optimizado para reducir redistribución forzada
    document.addEventListener('DOMContentLoaded', function() {
      // Usar DocumentFragment para batching de operaciones DOM
      const fragment = document.createDocumentFragment();
      
      // Optimización de imágenes lazy - evitar lecturas/escrituras DOM múltiples
      const lazyImages = document.querySelectorAll('img[loading="lazy"]');
      if (lazyImages.length > 0) {
        // Usar requestAnimationFrame para operaciones DOM no críticas
        requestAnimationFrame(() => {
          lazyImages.forEach(img => {
            if (!img.style.height && img.hasAttribute('height')) {
              const height = img.getAttribute('height');
              if (height) {
                img.style.minHeight = height + 'px';
              }
            }
          });
        });
      }
    });
    
    // Optimizaciones de rendimiento - Diferir operaciones no críticas
    window.addEventListener('load', function() {
      // Usar setTimeout para diferir operaciones no críticas y evitar bloqueos
      setTimeout(() => {
        console.log('Google My Maps cargado correctamente');
        
        // Precargar imágenes con IntersectionObserver (más eficiente)
        if ('IntersectionObserver' in window) {
          const imageObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
              if (entry.isIntersecting) {
                const img = new Image();
                img.src = entry.target.dataset.src;
                imageObserver.unobserve(entry.target);
              }
            });
          });
          
          // Configurar elementos a observar
          const imagesToPreload = [
            { src: 'img/familia.png' },
            { src: 'img/planta.png' }
          ];
          
          imagesToPreload.forEach(imgData => {
            const div = document.createElement('div');
            div.dataset.src = imgData.src;
            imageObserver.observe(div);
          });
        }
        
        // Configurar localStorage de forma asíncrona
        if (typeof(Storage) !== "undefined") {
          const cacheVersion = 'v2';
          const currentVersion = localStorage.getItem('boccocitos-cache-version');
          
          if (currentVersion !== cacheVersion) {
            localStorage.clear();
            localStorage.setItem('boccocitos-cache-version', cacheVersion);
          }
        }
      }, 100);
    });
    
    // Service Worker optimizado - registro asíncrono
    if ('serviceWorker' in navigator && 'caches' in window) {
      // Diferir registro del Service Worker para no bloquear
      setTimeout(() => {
        navigator.serviceWorker.register('/sw.js', {
          scope: '/'
        })
        .then(function(registration) {
          console.log('ServiceWorker registrado con éxito:', registration.scope);
          
          if (registration.waiting) {
            registration.waiting.postMessage({command: 'skipWaiting'});
          }
        })
        .catch(function(error) {
          console.log('ServiceWorker falló al registrarse:', error);
        });
      }, 200);
    }
    
    // Interceptor de fetch optimizado - evitar sobrecarga
    if ('fetch' in window) {
      const originalFetch = window.fetch;
      const cacheableExtensions = ['.png', '.jpg', '.jpeg', '.css', '.js', '.woff2'];
      
      window.fetch = function(...args) {
        const [resource, options = {}] = args;
        
        // Verificación más eficiente de recursos cacheables
        if (typeof resource === 'string') {
          const isCacheable = cacheableExtensions.some(ext => resource.includes(ext));
          
          if (isCacheable && !options.headers) {
            options.headers = {
              'Cache-Control': 'public, max-age=31536000'
            };
          }
        }
        
        return originalFetch(resource, options);
      };
    }
  </script>
</body>
</html>
